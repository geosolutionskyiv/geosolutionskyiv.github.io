!function(e){e.fn.lightbox_me=function(o){return this.each(function(){var i=e.extend({},e.fn.lightbox_me.defaults,o),t=e(),n=e(this),s=e('<iframe id="foo" style="z-index: '+(i.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(i.showOverlay){var l=e(".js_lb_overlay:visible");t=l.length>0?e('<div class="lb_overlay_clear js_lb_overlay"/>'):e('<div class="'+i.classPrefix+'_overlay js_lb_overlay"/>')}function a(){n[0].style;i.destroyOnClose?n.add(t).remove():n.add(t).hide(),i.parentLightbox&&i.parentLightbox.fadeIn(200),s.remove(),n.undelegate(i.closeSelector,"click"),e(window).unbind("reposition",d),e(window).unbind("reposition",c),e(window).unbind("scroll",c),e(window).unbind("keyup.lightbox_me"),i.onClose()}function d(){e(window).height()<e(document).height()?(t.css({height:e(document).height()+"px"}),s.css({height:e(document).height()+"px"})):t.css({height:"100%"})}function c(){n[0].style;if(n.css({left:"50%",marginLeft:n.outerWidth()/2*-1,zIndex:i.zIndex+3}),n.height()+80>=e(window).height()&&"absolute"!=n.css("position")){var o=e(document).scrollTop()+40;n.css({position:"absolute",top:o+"px",marginTop:0})}else if(n.height()+80<e(window).height()){i.centered?n.css({position:"fixed",top:"50%",marginTop:n.outerHeight()/2*-1}):n.css({position:"fixed"}).css(i.modalCSS)}}e("body").append(n.hide()).append(t),i.showOverlay&&(d(),t.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:i.zIndex+2,display:"none"}),t.hasClass("lb_overlay_clear")||t.css(i.overlayCSS)),i.showOverlay?t.fadeIn(i.overlaySpeed,function(){c(),n[i.appearEffect](i.lightboxSpeed,function(){d(),c(),i.onLoad()})}):(c(),n[i.appearEffect](i.lightboxSpeed,function(){i.onLoad()})),i.parentLightbox&&i.parentLightbox.fadeOut(200),e(window).resize(d).resize(c).scroll(c),e(window).bind("keyup.lightbox_me",function(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&i.closeEsc&&a()}),i.closeClick&&t.click(function(e){a(),e.preventDefault}),n.delegate(i.closeSelector,"click",function(e){a(),e.preventDefault()}),n.bind("close",a),n.bind("reposition",c)})},e.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"30%"},overlayCSS:{background:"black",opacity:.3}}}(jQuery);